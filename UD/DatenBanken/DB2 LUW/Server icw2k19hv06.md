
db2 connect to dopixdb user db2admin using IconDBA$2024IconDBA

## Criando os bancos de dados

- Executar o comando no "DB2 Command Window - Administration"
- Colocando o caminho 'C:\' o DB será criado em 'C:\db2data'
- No DB2 Command Window o comando SQL nao pode terminar em ';' 

### DopixDB

~~~SQL
db2 CREATE DATABASE dopixdbkp AUTOMATIC STORAGE YES ON 'C:\' DBPATH ON 'C:\' ALIAS dopixdbkp USING CODESET UTF-8 TERRITORY en_US COLLATE USING SYSTEM PAGESIZE 8 k CATALOG TABLESPACE MANAGED BY AUTOMATIC STORAGE  EXTENTSIZE   16 NO FILE SYSTEM CACHING USER TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING TEMPORARY TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING

db2 update db cfg for dopixdb using LOGFILSIZ 2000
db2 update db cfg for dopixdb using SOFTMAX 600
-- 
db2 update db cfg for dopixdb using LOGPRIMARY 15
db2 update db cfg for dopixdb using LOGSECOND  5
-- set timeout of locks to 1 second
db2 update db cfg for dopixdb using LOCKTIMEOUT 1


create LARGE tablespace DOPE_TSDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;
create LARGE tablespace DOPE_TSINDEX PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;

create LARGE tablespace DOPE_TSLOB PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF; 
create LARGE tablespace DOPE_TSLRRDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;

create LARGE tablespace DOPE_TSLRRINDEX PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;

create LARGE tablespace DOPE_TSLRRLOB PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;
create LARGE tablespace DOPE_TSILLDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;
create LARGE tablespace DOPE_TSILLINDEX PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;

create LARGE tablespace DOPE_TSILLLOB PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF;

CREATE USER TEMPORARY TABLESPACE DOPE_TSTEMP PAGESIZE 8192 MANAGED BY SYSTEM using ( 'c:\db2data\dopixdb\dope_tstemp') EXTENTSIZE 8 PREFETCHSIZE 8 BUFFERPOOL IBMDEFAULTBP;



~~~



### DopixFlow

~~~SQL
db2 CREATE DATABASE flowdb AUTOMATIC STORAGE YES ON 'C:\' DBPATH ON 'C:\' USING CODESET UTF-8 TERRITORY en_US COLLATE USING SYSTEM PAGESIZE 16 k DFT_EXTENT_SZ 32 CATALOG TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING USER TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING TEMPORARY TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING


db2 update db cfg for flowdb using LOGFILSIZ 2000
db2 update db cfg for flowdb using SOFTMAX 600
--
db2 update db cfg for flowdb using LOGPRIMARY 15
db2 update db cfg for flowdb using LOGSECOND  5
-- set timeout of locks to 1 second
db2 update db cfg for flowdb using LOCKTIMEOUT 1


TRANSFER OWNERSHIP OF sequence HIBERNATE_SEQUENCE TO USER db2admin  
        REVOKE PRIVILEGES;
        
        
select 'TRANSFER OWNERSHIP OF table '||rtrim(creator)||'.'||name||' TO USER db2admin REVOKE PRIVILEGES;' 
  from sysibm.systables 
 where lower(creator)='dopixflowit' and type='T';
 
 
 
 select 'TRANSFER OWNERSHIP OF index '||rtrim(creator)||'.'||name||' TO USER db2admin REVOKE PRIVILEGES;' 
  from sysibm.sysindexes 
 where lower(creator)='dopixflowit';


~~~


### StaccDB

~~~SQL
db2 CREATE DATABASE STACCDB AUTOMATIC STORAGE YES ON 'C:\' DBPATH ON 'C:\' ALIAS STACCDB USING CODESET UTF-8 TERRITORY en_US COLLATE USING SYSTEM PAGESIZE 8 k CATALOG TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING USER TABLESPACE MANAGED BY AUTOMATIC STORAGE  EXTENTSIZE   16 NO FILE SYSTEM CACHING TEMPORARY TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING

db2 update db cfg for STACCDB using LOGFILSIZ 10000
db2 update db cfg for STACCDB using SOFTMAX 600
-- 
db2 update db cfg for STACCDB using LOGPRIMARY 15
db2 update db cfg for STACCDB using LOGSECOND  5
-- set timeout of locks to 1 second
db2 update db cfg for STACCDB using LOCKTIMEOUT 1



create  tablespace DOPE_TSDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;
create  tablespace DOPE_TSINDEX PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;

create  tablespace DOPE_TSLOB PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;
create  tablespace DOPE_TSLRRDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;

create  tablespace DOPE_TSLRRINDEX PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;

create  tablespace DOPE_TSLRRLOB PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;
create  tablespace DOPE_TSILLDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;
create  tablespace DOPE_TSILLINDEX PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;

create  tablespace DOPE_TSILLLOB PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE;

CREATE USER TEMPORARY TABLESPACE DOPE_TSTEMP PAGESIZE 8192 MANAGED BY SYSTEM using ( 'c:\db2data\STACCDB\dope_tstemp') EXTENTSIZE 8 PREFETCHSIZE 8 BUFFERPOOL IBMDEFAULTBP;
COMMENT ON TABLESPACE DOPE_TSTEMP IS 'DOPE-Tempspace 8k-Seiten';



create LARGE tablespace DOPIXSTACC_TSDATA PAGESIZE 8192 managed by database 
using (FILE 'c:\db2data\STACCDB\dopixstacc_tsdata.db' 5000) 
AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF
;

create LARGE tablespace DOPIXSTACC_TSINDEX PAGESIZE 8192 managed by database 
using (FILE 'c:\db2data\STACCDB\dopixstacc_tsindex.db' 5000) 
AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF
;

create LARGE tablespace DOPIXSTACC_TSLOB PAGESIZE 8192 managed by database 
using (FILE 'c:\db2data\STACCDB\dopixstacc_tslob.db' 10000) 
AUTORESIZE YES EXTENTSIZE 16 PREFETCHSIZE 16 BUFFERPOOL IBMDEFAULTBP DROPPED TABLE RECOVERY OFF; 

CREATE USER TEMPORARY TABLESPACE DOPIXSTACC_TSTEMP PAGESIZE 8192 MANAGED BY SYSTEM 
using ( 'c:\db2data\STACCDB\dopixstacc_tstemp') EXTENTSIZE 8 PREFETCHSIZE 8 BUFFERPOOL IBMDEFAULTBP
;

COMMENT ON TABLESPACE DOPIXSTACC_TSDATA IS 'DOPIX STACC Data'
;

COMMENT ON TABLESPACE DOPIXSTACC_TSINDEX IS 'DOPIX STACC Indices'
;

COMMENT ON TABLESPACE DOPIXSTACC_TSLOB IS 'DOPIX STACC LOB entries'
;

COMMENT ON TABLESPACE DOPIXSTACC_TSTEMP IS 'DOPIX STACC Tempspace'
;
~~~


### dobredb

~~~SQL
db2 CREATE DATABASE dobredb AUTOMATIC STORAGE YES ON 'C:\' DBPATH ON 'C:\' ALIAS dobredb USING CODESET UTF-8 TERRITORY en_US COLLATE USING SYSTEM PAGESIZE 8 k CATALOG TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING USER TABLESPACE MANAGED BY AUTOMATIC STORAGE EXTENTSIZE   16 NO FILE SYSTEM CACHING TEMPORARY TABLESPACE MANAGED BY AUTOMATIC STORAGE  EXTENTSIZE   16 NO FILE SYSTEM CACHING
  
-- set filesize of logs to 10000 * 4kb     
db2 update db cfg for dobredb using LOGFILSIZ 10000
db2 update db cfg for dobredb using SOFTMAX 600
-- 
db2 update db cfg for dobredb using LOGPRIMARY 15
db2 update db cfg for dobredb using LOGSECOND  5
-- set timeout of locks to 1 second
db2 update db cfg for dobredb using LOCKTIMEOUT 1
~~~



### Datenbanken

dopix 
Schema: dopix 

cidopix 
Schema: dopix

dopixtes (dopixtest ist ein ungültige Name)
Schema: dopix

dopixdb 
Schema: dopix, cidopix, dopixtest 

----

flowdb (dopixflow ist ein ungültige Name)
Schema: dopixflow, dope 

ciflow
Schema: dopixflow, dope 

flowtest
Schema: dopixflow, dope 

----

staccdb (dopixstacc ist ein ungültige Name)
Schema: 


create  tablespace DOPE_TSLRRDATA PAGESIZE 8192 MANAGED BY AUTOMATIC STORAGE
[Code: -968, SQL State: 57011]  Im Dateisystem ist kein Platz mehr vorhanden.. SQLCODE=-968, SQLSTATE=57011, DRIVER=4.33.31
